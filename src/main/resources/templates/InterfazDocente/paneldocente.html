<!DOCTYPE html>
<html lang="es" xmlns:th="http://thymeLeaf.org">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title></title>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap">
	<link rel="stylesheet" th:href="@{/assetsDocente/stylespanel.css}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
</head>

<body>
	<!-- Top Navigation Bar -->
	<nav class="top-nav">
		<div class="top-nav-container">
			<!-- Logo y Brand -->
			<div class="top-nav-brand">
				<div class="top-nav-logo">
					<img th:src="@{/assetsDocente/img/ChatGPT Image 4 jul 2025, 02_22_14 p.m..png}" alt="CodiPlayCo Mascot" class="top-nav-logo-img" />
				</div>
				<div class="top-nav-brand-text">
					<h1 class="top-nav-brand-title">CodiPlayCo</h1>
					<p class="top-nav-brand-subtitle">Aprende programando</p>
				</div>
			</div>

			<!-- Navigation Links -->
			<div class="top-nav-links">
				<a th:href="@{/InterfazDocente/paneldocente}" class="top-nav-link active">
					<i class="fa-solid fa-house"></i>
					<span>Inicio</span>
				</a>
				<a th:href="@{/InterfazDocente/mis-cursos}" class="top-nav-link">
					<i class="fa-solid fa-book"></i>
					<span>Mis Cursos</span>
				</a>
				<a th:href="@{/InterfazDocente/tareas}" class="top-nav-link">
					<i class="fa-solid fa-clipboard-list"></i>
					<span>Tareas</span>
				</a>
			<a th:href="@{/InterfazDocente/foros}" class="top-nav-link">
				<i class="fa-solid fa-comments"></i>
				<span>Foros</span>
			</a>
			<a th:href="@{/InterfazDocente/mensajes}" class="top-nav-link">
				<i class="fa-solid fa-envelope"></i>
				<span>Mensajes</span>
			</a>
		</div>

			<!-- Right Actions -->
			<div class="top-nav-actions">
				<label aria-checked="false" role="switch" class="switch" title="Cambiar modo claro/oscuro">
					<input type="checkbox" id="themeSwitch" />
					<span class="slider">
						<span class="slider-inner"></span>
					</span>
				</label>
				<div class="top-nav-profile" id="userProfileBtn">
					<div class="top-nav-profile-info">
						<span class="top-nav-profile-name" th:if="${docente != null}" th:text="${docente.nombre}">Docente</span>
						<span class="top-nav-profile-name" th:if="${docente == null}">Docente</span>
						<span class="top-nav-profile-role">Docente</span>
					</div>
					<div class="top-nav-profile-avatar">
						<i class="fa-solid fa-user"></i>
					</div>
					<div class="top-nav-submenu" id="userProfileMenu">
						<div class="submenu-header">
							<p th:if="${docente != null}"><strong>Nombre:</strong> <span th:text="${docente.nombre + ' ' + docente.apellido}">Nombre Completo</span></p>
							<p th:if="${docente == null}"><strong>Nombre:</strong> No disponible</p>
							<p><strong>Rol:</strong> Docente</p>
						</div>
						<div class="submenu-divider"></div>
						<a th:href="@{/InterfazDocente/logout}" class="submenu-logout-btn">
							<i class="fa-solid fa-right-from-bracket"></i>
							<span>Cerrar Sesión</span>
						</a>
					</div>
				</div>
			</div>
		</div>
	</nav>

	<div class="main-layout">
		<script>
			// Mantener modo oscuro con localStorage
			function setDarkMode(enabled) {
				if (enabled) {
					document.body.classList.add('dark-mode');
					localStorage.setItem('theme', 'dark-mode');
				} else {
					document.body.classList.remove('dark-mode');
					localStorage.setItem('theme', 'light-mode');
				}
			}
			// Al cargar la página, aplicar preferencia
			(function () {
				const theme = localStorage.getItem('theme');
				if (theme === 'dark-mode') {
					document.body.classList.add('dark-mode');
					const btn = document.querySelector('.toggle-mode-btn');
					if (btn) {
						const icon = btn.querySelector('i');
						icon.classList.remove('fa-moon');
						icon.classList.add('fa-sun');
					}
				}
			})();
			// Switch de modo oscuro/claro
			const themeSwitch = document.getElementById('themeSwitch');
			const switchLabel = document.querySelector('.switch');
			
			// Aplicar estado inicial del switch según el tema
			(function () {
				const theme = localStorage.getItem('theme');
				if (theme === 'dark-mode') {
					document.body.classList.add('dark-mode');
					if (themeSwitch) {
						themeSwitch.checked = true;
						if (switchLabel) switchLabel.setAttribute('aria-checked', 'true');
					}
				} else {
					if (themeSwitch) {
						themeSwitch.checked = false;
						if (switchLabel) switchLabel.setAttribute('aria-checked', 'false');
					}
				}
			})();
			
			// Event listener para el switch
			if (themeSwitch) {
				themeSwitch.addEventListener('change', function () {
					const isDark = this.checked;
					setDarkMode(isDark);
					if (switchLabel) {
						switchLabel.setAttribute('aria-checked', isDark ? 'true' : 'false');
					}
				});
			}
			
			// Marcar link activo según la URL
			const currentPath = window.location.pathname;
			const navLinks = document.querySelectorAll('.top-nav-link');
			navLinks.forEach(link => {
				link.classList.remove('active');
				if (link.getAttribute('href') && currentPath.includes(link.getAttribute('href').replace('@{', '').replace('}', ''))) {
					link.classList.add('active');
				}
			});
			
			// User Profile Menu Toggle
			const userProfileBtn = document.getElementById('userProfileBtn');
			const userProfileMenu = document.getElementById('userProfileMenu');
			
			if (userProfileBtn && userProfileMenu) {
				// Toggle menu on click
				userProfileBtn.addEventListener('click', function(e) {
					e.stopPropagation();
					userProfileMenu.classList.toggle('show');
				});
				
				// Close menu when clicking outside
				document.addEventListener('click', function(e) {
					if (!userProfileBtn.contains(e.target) && !userProfileMenu.contains(e.target)) {
						userProfileMenu.classList.remove('show');
					}
				});
				
				// Close menu when clicking on logout button
				const logoutBtn = userProfileMenu.querySelector('.submenu-logout-btn');
				if (logoutBtn) {
					logoutBtn.addEventListener('click', function() {
						userProfileMenu.classList.remove('show');
					});
				}
			}
		</script>
		
		<div class="container">
			<div class="panel-bienvenida-bg">
				<div class="panel-bienvenida-content">
					<div class="panel-bienvenida-left">
						<div class="panel-bienvenida-foto">
							<img th:if="${docente != null and docente.avatar != null and !#strings.isEmpty(docente.avatar)}"
								 th:src="@{'/uploads/avatars/' + ${docente.avatar}}" alt="Foto docente" class="avatar-preview" />
							<i th:unless="${docente != null and docente.avatar != null and !#strings.isEmpty(docente.avatar)}" class="fa-solid fa-user-circle"></i>
						</div>
					<div class="panel-bienvenida-texto">
						<p class="panel-bienvenida-saludo">¡Hola de nuevo!</p>
						<div class="panel-bienvenida-titulo">Bienvenido a CodiPlayCo</div>
						<div class="panel-bienvenida-nombre" th:if="${docente != null}" th:text="${docente.nombre + ' ' + docente.apellido}">NOMBRE DOCENTE</div>
						<div class="panel-bienvenida-nombre" th:if="${docente == null}">Docente</div>
					</div>
					</div>
					<div class="panel-bienvenida-botimg bot-animado">
						<img th:src="@{/assetsDocente/img/02baebb1-f087-4bee-bbdf-0af4f44d7563-removebg-preview.png}" alt="Docente Bot" />
					</div>
				</div>
			</div>
			
			<div class="panel-bienvenida-datos">

			    <h3 class="datos-titulo">
					<i class="fa-solid fa-user"></i>
					<span>Datos del Docente</span>
				</h3>

			    <!-- Error -->
			    <div th:if="${error != null}" class="error-message">
			        <i class="fa-solid fa-exclamation-triangle"></i>
			        <span th:text="${error}">Error</span>
			    </div>

			    <!-- Datos del docente -->
			    <div th:if="${docente != null}" class="datos-docente-wrapper">

			        <div class="datos-docente-linea">

			            <div class="dato-item">
			                <span class="dato-label">DOCENTE:</span>
			                <span class="dato-valor" th:text="${docente.nombre + ' ' + docente.apellido}">
			                    Nombre docente
			                </span>
			            </div>

			            <div class="dato-item">
			                <span class="dato-label">EMAIL:</span>
			                <span class="dato-valor" th:text="${docente.email}">
			                    ejemplo@gmail.com
			                </span>
			            </div>

			            <div class="dato-item">
			                <span class="dato-label">CÉDULA </span>
			                <span class="dato-valor" th:text="${docente.documento}">
			                    0000000000
			                </span>
			            </div>

			        </div>

			        <!-- SUBIR IMAGEN -->
			        <div class="subir-imagen">

			            <label class="subir-imagen-label">
						<i class="fa-solid fa-upload"></i>
						<span>Subir imagen de perfil:</span>
					</label>

			            <form th:action="@{/InterfazDocente/subir-foto}" 
			                  method="post"
			                  enctype="multipart/form-data"
			                  class="subir-imagen-form">
			                <label class="input-file-label">
				                <input type="file" name="foto" accept="image/*" class="input-file">
				                <span class="input-file-text">Seleccionar archivo</span>
			                </label>
			                <button type="submit" class="btn-subir">
			                    Subir
			                </button>
			            </form>

			        </div>

			    </div>
				
				<!-- Mensaje si no hay datos del docente -->
				<div th:if="${docente == null && error == null}" class="no-data-message" style="background: #fff3e0; color: #ef6c00; padding: 1rem; border-radius: 8px; text-align: center;">
					<i class="fa-solid fa-info-circle"></i> <span>Para ver los datos del docente, inicie sesión con un email válido</span>
				</div>
			</div>
		</div>
	</div>
</body>

</html>