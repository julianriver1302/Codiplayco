<!DOCTYPE html>

<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Detalle del Foro</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap">

    <link rel="stylesheet" th:href="@{/assetsDocente/stylespanel.css}">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

    <link rel="stylesheet" th:href="@{/assetsDocente/css/forodetalle.css}" />

</head>

<body>
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="top-nav-container">
            <!-- Logo y Brand -->
            <div class="top-nav-brand">
                <div class="top-nav-logo">
                    <img th:src="@{/assetsDocente/img/ChatGPT Image 4 jul 2025, 02_22_14 p.m..png}" alt="CodiPlayCo Mascot" class="top-nav-logo-img" />
                </div>
                <div class="top-nav-brand-text">
                    <h1 class="top-nav-brand-title">CodiPlayCo</h1>
                    <p class="top-nav-brand-subtitle">Aprende programando</p>
                </div>
            </div>

            <!-- Navigation Links -->
            <div class="top-nav-links">
                <a th:href="@{/InterfazDocente/paneldocente}" class="top-nav-link">
                    <i class="fa-solid fa-house"></i>
                    <span>Inicio</span>
                </a>
                <a th:href="@{/InterfazDocente/mis-cursos}" class="top-nav-link">
                    <i class="fa-solid fa-book"></i>
                    <span>Mis Cursos</span>
                </a>
                <a th:href="@{/InterfazDocente/tareas}" class="top-nav-link">
                    <i class="fa-solid fa-clipboard-list"></i>
                    <span>Tareas</span>
                </a>
                <a th:href="@{/InterfazDocente/foros}" class="top-nav-link active">
                    <i class="fa-solid fa-comments"></i>
                    <span>Foros</span>
                </a>
                <a th:href="@{/InterfazDocente/mensajes}" class="top-nav-link">
                    <i class="fa-solid fa-envelope"></i>
                    <span>Mensajes</span>
                </a>
            </div>

            <!-- Right Actions -->
            <div class="top-nav-actions">
                <label aria-checked="false" role="switch" class="switch" title="Cambiar modo claro/oscuro">
                    <input type="checkbox" id="themeSwitch" />
                    <span class="slider">
                        <span class="slider-inner"></span>
                    </span>
                </label>
                <div class="top-nav-profile" id="userProfileBtn">
                    <div class="top-nav-profile-info">
                        <span class="top-nav-profile-name" th:if="${docente != null}" th:text="${docente.nombre}">Docente</span>
                        <span class="top-nav-profile-name" th:if="${docente == null}">Docente</span>
                        <span class="top-nav-profile-role">Docente</span>
                    </div>
                    <div class="top-nav-profile-avatar">
                        <i class="fa-solid fa-user"></i>
                    </div>
                    <div class="top-nav-submenu" id="userProfileMenu">
                        <div class="submenu-header">
                            <p th:if="${docente != null}"><strong>Nombre:</strong> <span th:text="${docente.nombre + ' ' + docente.apellido}">Nombre Completo</span></p>
                            <p th:if="${docente == null}"><strong>Nombre:</strong> No disponible</p>
                            <p><strong>Rol:</strong> Docente</p>
                        </div>
                        <div class="submenu-divider"></div>
                        <a th:href="@{/InterfazDocente/logout}" class="submenu-logout-btn">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            <span>Cerrar Sesión</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-layout">

        <header>

            <div class="header-logo-title">

                <h1 class="titulo-blanco"><span class="panel-icon"><i class="fa-solid fa-comments"></i></span>Detalle del foro</h1>

            </div>

        </header>



    <div class="container">

        <div class="panel">

            <a th:href="@{/InterfazDocente/foros}" class="btn-volver" style="margin-bottom:1rem; display:inline-block;">

                <i class="fa-solid fa-arrow-left"></i> Volver a foros

            </a>



            <h2><span class="panel-icon"><i class="fa-solid fa-comment-dots"></i></span>

                <span th:text="${foro.titulo}">Título foro</span>

            </h2>

            <p th:text="${foro.descripcion}">Descripción del foro</p>

            <small th:text="${#temporals.format(foro.fechaCreacion, 'dd/MM/yyyy HH:mm')}">Fecha</small>

        </div>



        <div class="panel">

            <h3><span class="panel-icon"><i class="fa-solid fa-comments"></i></span> Respuestas de estudiantes</h3>



            <div th:if="${respuestas == null or #lists.isEmpty(respuestas)}">

                <p>No hay respuestas todavía en este foro.</p>

            </div>



            <div th:if="${respuestas != null and !#lists.isEmpty(respuestas)}">

                <ul class="lista-foros">

                    <li th:each="resp : ${respuestas}" class="foro-item">

                        <div class="foro-header">

                            <strong th:text="${resp.autor != null ? resp.autor.nombre + ' ' + resp.autor.apellido : 'Estudiante'}">Estudiante</strong>

                            <small th:text="${#temporals.format(resp.fechaCreacion, 'dd/MM/yyyy HH:mm')}">Fecha</small>

                        </div>

                        <p th:text="${resp.mensaje}">Mensaje de la respuesta</p>

                    </li>

                </ul>

            </div>

        </div>

    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Mantener modo oscuro con localStorage
        function setDarkMode(enabled) {
            if (enabled) {
                document.body.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
                localStorage.setItem('theme', 'light-mode');
            }
        }

        // Aplicar tema al cargar
        (function () {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark-mode') {
                document.body.classList.add('dark-mode');
            }
        })();
        
        // Switch de modo oscuro/claro
        const themeSwitch = document.getElementById('themeSwitch');
        const switchLabel = document.querySelector('.switch');
        
        // Aplicar estado inicial del switch según el tema
        (function () {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark-mode') {
                document.body.classList.add('dark-mode');
                if (themeSwitch) {
                    themeSwitch.checked = true;
                    if (switchLabel) switchLabel.setAttribute('aria-checked', 'true');
                }
            } else {
                if (themeSwitch) {
                    themeSwitch.checked = false;
                    if (switchLabel) switchLabel.setAttribute('aria-checked', 'false');
                }
            }
        })();
        
        // Event listener para el switch
        if (themeSwitch) {
            themeSwitch.addEventListener('change', function () {
                const isDark = this.checked;
                setDarkMode(isDark);
                if (switchLabel) {
                    switchLabel.setAttribute('aria-checked', isDark ? 'true' : 'false');
                }
            });
        }
        
        // Marcar link activo según la URL
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.top-nav-link');
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') && currentPath.includes(link.getAttribute('href').replace('@{', '').replace('}', ''))) {
                link.classList.add('active');
            }
        });
        
        // User Profile Menu Toggle
        const userProfileBtn = document.getElementById('userProfileBtn');
        const userProfileMenu = document.getElementById('userProfileMenu');
        
        if (userProfileBtn && userProfileMenu) {
            // Toggle menu on click
            userProfileBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                userProfileMenu.classList.toggle('show');
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!userProfileBtn.contains(e.target) && !userProfileMenu.contains(e.target)) {
                    userProfileMenu.classList.remove('show');
                }
            });
            
            // Close menu when clicking on logout button
            const logoutBtn = userProfileMenu.querySelector('.submenu-logout-btn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    userProfileMenu.classList.remove('show');
                });
            }
        }
    });
</script>

</body>

</html>
